<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta charset="UTF-8">
    <title>busi</title>
    <script src="dist/busi.js"></script>

</head>
<body>
    <div id="app">
        <h2>{{title}}</h2>
        <h1>{{name}}</h1>
         <div b-if="aaa">aaaaa
            <div b-if="ccc">ccc</div>
         </div>
         <div b-else>bbbb</div>
        <input type="text" name="" b-model="man.dd">
        <div b-bind:class="class"></div>
        <div b-for="(data,index) in list"> 
            <div>{{data.key}}</div>
            <div>{{data.color}}</div>
            <div b-bind:class="color"></div>
            <div b-if="aaa">aaaaa
                <div b-if="ccc">ccc</div>
            </div>
            <div b-else>bbbb</div>
            <div b-for="(aa,index) in forlist">
                <div>{{aa.key}}</div>
            </div>
        </div>
        <list></list>
        <router></router>
    </div>
    <script type="text/javascript">
        // TODO 不存在隐藏
        // 多级对象设置
        
        Busi.component('list', {
        template: '<ul><li>listitem1</li><li>{{cdata}}</li></ul><div>hahahhah</div><show b-bind:test="cdata"></show>',
        props: {
            //test
        },
        data: {
            cdata: 'aa'
        },
        init: function () {
            console.log('init');
        },
        ready: function () {
            console.log('ready');        
        },
        methods: {
            getName:function () {
                console.log('getName');
            }
        }
    });  
    Busi.component('show', {
        template: '<div>{{test}}</div><div>{{cdata}}</div><bala></bala>',
        props: {
            test: 'ddd'
        },
        data: {
            cdata: 'bb'
        },
        create: function () {
            let self = this;
            setTimeout(function () {
                self.data.cdata = 'ccc';
            },1000);
            this.methods.getName();
            console.log('init');
        },
        afterMount: function () {
            console.log('ready');        
        },
        methods: {
            getName:function () {
                //this.cdata = 'ccc'
                console.log('getName');
            }
        }
    }); 
    var busi = new Busi(
    {
        component: {
            name: 'index',
            el: document.querySelector('#app'),
            data: {
                name: 'hello world',
                man: 'dd',
                title: 'haha',
                class:'red',
                aaa:true,
                ccc:true,
                list:[
                    {
                        key : 1,
                        color: 'red',
                        forlist : [
                        {
                            key:333
                        },
                        {
                            key:333
                        }
                        ]
                    },
                    {
                        key : 2,
                        color: 'green',
                        forlist : [
                        {
                            key:444
                        },
                        {
                            key:444
                        }
                        ]
                    }
                ]
            }
        }, 
        
    }
    );
    let comp = busi.getinnerComponent().getData();
    window.setTimeout(function () {
        comp.name = 'canfoo';
        comp.title = 'hehe';
        comp.man = 'man??';
        comp.class = 'green';
        comp.aaa = false;
        comp.ccc = false;
        // busi.list = [
        // {
        //     key : 3
        // },
        // {
        //     key : 4
        // }
        // ];
    }, 2000);
    
</script>
<style type="text/css">
    .red {
        height: 20px;
        width: 20px;
        background-color: red;
    }
    .green {
        height: 20px;
        width: 20px;
        background-color: green;
    }
</style>
<body>
<html>
